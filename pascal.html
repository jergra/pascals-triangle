<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pascal's Triangle</title>
    <!--
    <script src="//cdn.jsdelivr.net/bluebird/3.7.2/bluebird.js"></script>
    
  <script type="text/javascript">
  
    document.addEventListener('DOMContentLoaded', function() {
      var time = document.getElementById('time-stamp');
      clockTick();
      setInterval(clockTick, 1000);
      function clockTick() {
        time.innerHTML = new Date().toLocaleTimeString();
      }
    });
    
  </script>
  -->
</head>
<body>
    <!--
        <p>The current time is <span id="time-stamp"></span>.</p>
   
  <p style="color: white">Your name is <span id="prompt"></span>.</p>
  
    <div style="color: white; font-family:  Helvetica; font-size: 15px;">
        
        <button id="action">Number of rows</button>
            <input type="number" id="action" name="action"><br><br>
            
        
        <button id="clear">Clear</button>
    </div>
     -->
    <div class="top">
        <div>
            <div class="buttons">
                <button id="action">Generate rows</button>
                <div>&nbsp;&nbsp;&nbsp;Rows: <span id="prompt"></span></div>
            </div>
            <button id="clear" style="margin-top: 8px">Clear</button>
        </div>
        <div>
            <a href="./pascal.html"><button style="border: 2px solid red">Pascal's Triangle I</button></a>
            <a href="./index.html"><button>Pascal's Triangle II</button></a>
        </div>
    </div>
    <div id="logger"></div>

</body>
</html>

<script>


const pascalsTriangle = function(b, i) {

a = [1]

// [1,1] triangle is generated starting from here

c = [1,2,1]
d = [1,3,3,1]
e = [1,4,6,4,1]
f = [1,5,10,10,5,1]
g = [1,6,15,20,15,6,1]

// etc.


m = ''

    //console.log("--------------------------------------")
    //console.log("b, b length:", b, b.length)
    if (b.length % 2 === 0) {
        //console.log("even length middle pair:", b[parseInt(b.length/2 -1)], b[parseInt(b.length/2)])
        b.splice(parseInt(b.length/2), 0, b[parseInt(b.length/2 - 1)] + b[parseInt(b.length/2)])
        //console.log("b after splice:", b)
        //console.log("b now initially:", b)
        for (k=1;k<i;k++) {
            //console.log("parseInt(b.length/2) - k - 1 > -1 yes?:", parseInt(b.length/2) - k - 1)
            //console.log("b.length:", b.length)
            //console.log("parseInt(b.length/2) + k + 1 < b.length yes?:", parseInt(b.length/2) + k + 1)
            if ((parseInt(b.length/2) - k - 1 > -1) && (parseInt(b.length/2) + k + 1 < b.length)) {
                //console.log("parseInt(b.length/2):", parseInt(b.length/2))
                //console.log("i, k, b[parseInt(b.length/2) - k], b[parseInt(b.length/2) - k - 1] before:", i, k, b[parseInt(b.length/2) - k], b[parseInt(b.length/2) - k - 1])
                b[parseInt(b.length/2) - k] = b[parseInt(b.length/2) - k] + b[parseInt(b.length/2) - k - 1]
                //console.log("i, k, b[parseInt(b.length/2) - k], b[parseInt(b.length/2) - k - 1] after:", i, k, b[parseInt(b.length/2) - k], b[parseInt(b.length/2) - k - 1])
                //console.log("array now adjusted on the left:", b)
                //console.log("i, k, b[parseInt(b.length/2) + k], b[parseInt(b.length/2) + k + 1] before:", i, k, b[parseInt(b.length/2) + k], b[parseInt(b.length/2) + k + 1])
                b[parseInt(b.length/2) + k] = b[parseInt(b.length/2) + k] +  b[parseInt(b.length/2) + k + 1]
                //console.log("i, k, b[parseInt(b.length/2) + k], b[parseInt(b.length/2) + k + 1] after:", i, k, b[parseInt(b.length/2) + k], b[parseInt(b.length/2) + k + 1])
                //console.log("array now adjusted on the right:", b)
            }
        }
        m = m + b
        //p = m.length
        //y = ''
        //for (let v=0;v<size*6 - p/1.3;v++){
            //y = y + "&nbsp;"
        //}
        console.log('<div class="center">' + m + '</div>')
        return b
        //console.log("b which was even, is now  odd at completion:", b)
    }
    else if (b.length % 2 !== 0) {
        //console.log("odd length middle pair:", b[parseInt(b.length/2 -1)], b[parseInt(b.length/2)])
        b.splice(parseInt(b.length/2), 0, b[parseInt(b.length/2 -1)] + b[parseInt(b.length/2)])
        //console.log("b after splice:", b)
        //console.log(parseInt(b.length/2) - 2, parseInt(b.length/2) - 1, parseInt(b.length/2))
        //console.log(b[parseInt(b.length/2) - 2], b[parseInt(b.length/2) - 1], b[parseInt(b.length/2)])
        b[parseInt(b.length/2)] = b[parseInt(b.length/2) - 2] + b[parseInt(b.length/2)]
        //console.log("b now initially:", b)
        for (j=2;j<i;j++) {
            //console.log("parseInt(b.length/2) - j - 1 > -1 yes?:", parseInt(b.length/2) - j - 1)
            //console.log("b.length:", b.length)
            //console.log("parseInt(b.length/2) + j < b.length yes?:", parseInt(b.length/2) + j)
            if ((parseInt(b.length/2) - j - 1 > -1) && (parseInt(b.length/2) + j < b.length)) {
                //console.log("i, j, b[parseInt(b.length/2) + j - 1], b[parseInt(b.length/2) + j] before:", i, j, b[parseInt(b.length/2) + j - 1], b[parseInt(b.length/2) + j])
                b[parseInt(b.length/2) + j - 1] = b[parseInt(b.length/2) + j - 1] + b[parseInt(b.length/2) + j]
                //console.log("i, j, b[parseInt(b.length/2) + j - 1], b[parseInt(b.length/2) + j] after:", i, j, b[parseInt(b.length/2) + j - 1], b[parseInt(b.length/2) + j])
                //console.log("array now adjusted on the right:", b)
                //console.log("i, j, b[parseInt(b.length/2) - j], b[parseInt(b.length/2) - j - 1] before:", i, j, b[parseInt(b.length/2) - j], b[parseInt(b.length/2) - j - 1])
                b[parseInt(b.length/2) - j] = b[parseInt(b.length/2) - j] +  b[parseInt(b.length/2) - j - 1]
                //console.log("i, j, b[parseInt(b.length/2) - j], b[parseInt(b.length/2) - j - 1] after:", i, j, b[parseInt(b.length/2) - j], b[parseInt(b.length/2) - j - 1])
                //console.log("array now adjusted on the left:", b)
            }
        }
       // console.log("b which was odd, is now even at completion:", b)
       
       m = m + b
       // p = m.length
        //y = ''
        //for (let v=0;v<size*6 - p/1.3;v++){
            //y = y + "&nbsp;"
        //}
        //console.log(y + m)
        console.log('<div class="center">' + m + '</div>')
       return b
    }
    
    
}
arr = [1,1]
size = 16
counting = 0

while (counting < size){
    var result = pascalsTriangle(arr, size)
    //console.log("result:", result)
    counting++
}


function promptPromise(message) {
  return new Promise(function(resolve, reject) {
    var result = window.prompt(message);
    if (result != null) {
      resolve(result);
    } else {
      reject(new Error('User cancelled'));
    }
  });
}

var button = document.getElementById('action');
var buttonClear = document.getElementById('clear')
//var input = document.getElementById('action2');
//var form = document.getElementById('action2');
var output = document.getElementById('prompt');

/*
button.addEventListener('click', function() {
  promptPromise('Enter the number of rows:')
    .then(function(name) {
      //output.innerHTML = String(name);
      //console.log("name:", name)
        size = name - 1
        arr = [1,1]
        counting = 0
        console.log('<div class="center" style="padding-top: 20px;">' + '1' + '</div>')
        console.log('<div class="center">' + '1,1' + '</div>')

        while (counting < size){
            var result = pascalsTriangle(arr, size)
            //console.log("result:", result)
            counting++
        }
    })
    .catch(function() {
      output.innerHTML = '¯\\_(ツ)_/¯';
    });
});
*/
button.addEventListener('click', function() {
  promptPromise('Enter number of rows:')
    .then(function(name) {
      output.innerHTML = name;
      size = name - 2
        arr = [1,1]
        counting = 0
        console.log('<div class="center" style="padding-top: 20px;">' + '1' + '</div>')
        console.log('<div class="center">' + '1,1' + '</div>')

        while (counting < size){
            var result = pascalsTriangle(arr, size)
            //console.log("result:", result)
            counting++
        }
    })
    .catch(function() {
      output.innerHTML = '¯\\_(ツ)_/¯';
    });
});


buttonClear.addEventListener('click', function() {
  window.location.reload()
});
/*
form.addEventListener('onsubmit', function() {
    //console.log("input value:", document.getElementById("action2").value.length)
    if (document.getElementById("action2").value) {
        size = document.getElementById("action2").value - 1
        arr = [1,1]
        counting = 0
        console.log('<div class="center" style="padding-top: 20px;">' + '1' + '</div>')
        console.log('<div class="center">' + '1,1' + '</div>')

        while (counting < size){
            var result = pascalsTriangle(arr, size)
            //console.log("result:", result)
            counting++
        }
    }
    
});

    */

(function (logger) {
    console.old = console.log;
    console.log = function () {
        var output = "", arg, i;

        for (i = 0; i < arguments.length; i++) {
            arg = arguments[i];
            output += "<span class=\"log-" + (typeof arg) + "\">";

            if (
                typeof arg === "object" &&
                typeof JSON === "object" &&
                typeof JSON.stringify === "function"
            ) {
                output += JSON.stringify(arg);   
            } else {
                output += arg;   
            }

            output += "</span>&nbsp;";
        }

        logger.innerHTML += output + "<br>";
        console.old.apply(undefined, arguments);
    };
})(document.getElementById("logger"));

// Testing
arr = [1,1]
//size = 6 // adjust number of rows here
//size = prompt("Enter number of rows:");
//size = size + 1
size = 17
/*
document.getElementById("newSize").addEventListener("input", myFunction);

function myFunction() {
  size = document.getElementById("newSize").value
  console.log("newSize:", size)
  counting = 0
    console.log('<div class="center" style="padding-top: 20px;">' + '1' + '</div>')
    console.log('<div class="center">' + '1,1' + '</div>')

    while (counting < size){
        var result = pascalsTriangle(arr, size)
        //console.log(result)
        counting++
    }

}

*/



/*
counting = 0
console.log('<div class="center" style="padding-top: 20px;">' + '1' + '</div>')
console.log('<div class="center">' + '1,1' + '</div>')

while (counting < size){
    var result = pascalsTriangle(arr, size)
    //console.log(result)
    counting++
}
*/



//console.log("Hi!", {a:3, b:6}, 42, true);
//console.log("Multiple", "arguments", "here");
//console.log(null, undefined);
//console.old("Eyy, that's the old and boring one."); 

</script>

<style>

body {
    background: #333;
}

.top {
    display: flex;
    justify-content: space-between;
}
.buttons {
    display: flex;
    color: white; 
    font-family:  Helvetica; font-size: 12px;
}

.log-boolean,
.log-undefined {color: magenta;}
.log-object,
.log-string {color: yellowgreen;}
.log-number {color: cyan;}
.center {
    width: 900px;
    text-align: center;
    margin-top: -15px;
}
</style>

